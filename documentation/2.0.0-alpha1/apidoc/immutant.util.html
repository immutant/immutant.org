<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><link href="css/docs.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>immutant.util documentation</title></head><body><div id="header"><h2><a href="http://immutant.org/">Immutant Home</a></h2><h1><a href="index.html">Immutant 2.0.0-alpha1</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>immutant</span></div></div></li><li class="depth-2"><a href="immutant.caching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>caching</span></div></a></li><li class="depth-3 branch"><a href="immutant.caching.core-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-cache</span></div></a></li><li class="depth-3"><a href="immutant.caching.core-memoize.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-memoize</span></div></a></li><li class="depth-2 branch"><a href="immutant.codecs.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>codecs</span></div></a></li><li class="depth-2 branch"><a href="immutant.coercions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coercions</span></div></a></li><li class="depth-2 branch"><a href="immutant.daemons.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>daemons</span></div></a></li><li class="depth-2"><a href="immutant.messaging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>messaging</span></div></a></li><li class="depth-3 branch"><a href="immutant.messaging.hornetq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hornetq</span></div></a></li><li class="depth-3"><a href="immutant.messaging.pipeline.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline</span></div></a></li><li class="depth-2"><a href="immutant.scheduling.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>scheduling</span></div></a></li><li class="depth-3"><a href="immutant.scheduling.joda.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>joda</span></div></a></li><li class="depth-2 branch current"><a href="immutant.util.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2"><a href="immutant.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.undertow.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>undertow</span></div></a></li><li class="depth-3"><a href="immutant.web.websocket.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websocket</span></div></a></li><li class="depth-2"><a href="immutant.wildfly.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>wildfly</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="immutant.util.html#var-app-name"><div class="inner"><span>app-name</span></div></a></li><li class="depth-1"><a href="immutant.util.html#var-app-relative"><div class="inner"><span>app-relative</span></div></a></li><li class="depth-1"><a href="immutant.util.html#var-app-root"><div class="inner"><span>app-root</span></div></a></li><li class="depth-1"><a href="immutant.util.html#var-at-exit"><div class="inner"><span>at-exit</span></div></a></li><li class="depth-1"><a href="immutant.util.html#var-classpath"><div class="inner"><span>classpath</span></div></a></li><li class="depth-1"><a href="immutant.util.html#var-dev-mode.3F"><div class="inner"><span>dev-mode?</span></div></a></li><li class="depth-1"><a href="immutant.util.html#var-http-port"><div class="inner"><span>http-port</span></div></a></li><li class="depth-1"><a href="immutant.util.html#var-in-cluster.3F"><div class="inner"><span>in-cluster?</span></div></a></li><li class="depth-1"><a href="immutant.util.html#var-in-container.3F"><div class="inner"><span>in-container?</span></div></a></li><li class="depth-1"><a href="immutant.util.html#var-messaging-remoting-port"><div class="inner"><span>messaging-remoting-port</span></div></a></li><li class="depth-1"><a href="immutant.util.html#var-reset"><div class="inner"><span>reset</span></div></a></li><li class="depth-1"><a href="immutant.util.html#var-reset-fixture"><div class="inner"><span>reset-fixture</span></div></a></li><li class="depth-1"><a href="immutant.util.html#var-set-bean-property"><div class="inner"><span>set-bean-property</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">immutant.util</h2><div class="doc"><p>Various utility functions.</p></div><div class="public anchor" id="var-app-name"><h3>app-name</h3><div class="usage"><code>(app-name)</code></div><div class="doc"><p>Returns the name of the current application.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L60">view source</a></div></div><div class="public anchor" id="var-app-relative"><h3>app-relative</h3><div class="usage"><code>(app-relative &amp; path)</code></div><div class="doc"><p>Returns an absolute file relative to <code><a href="immutant.util.html#var-app-root">app-root</a></code>.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L89">view source</a></div></div><div class="public anchor" id="var-app-root"><h3>app-root</h3><div class="usage"><code>(app-root)</code></div><div class="doc"><p>Returns a file pointing to the root dir of the application.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L55">view source</a></div></div><div class="public anchor" id="var-at-exit"><h3>at-exit</h3><div class="usage"><code>(at-exit f)</code></div><div class="doc"><p>Registers <code>f</code> to be called when the application is undeployed. Used internally to shutdown various services, but can be used by application code as well.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L108">view source</a></div></div><div class="public anchor" id="var-classpath"><h3>classpath</h3><div class="usage"><code>(classpath)</code></div><div class="doc"><p>Returns the effective classpath for the application.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L96">view source</a></div></div><div class="public anchor" id="var-dev-mode.3F"><h3>dev-mode?</h3><div class="usage"><code>(dev-mode?)</code></div><div class="doc"><p>Returns true if the app is running in dev mode.</p><p>This is controlled by the <code>LEIN&#95;NO&#95;DEV</code> environment variable.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L101">view source</a></div></div><div class="public anchor" id="var-http-port"><h3>http-port</h3><div class="usage"><code>(http-port)</code></div><div class="doc"><p>Returns the HTTP port for the embedded web server.</p><p>Returns the correct port when in-container, and the default (8080), outside.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L73">view source</a></div></div><div class="public anchor" id="var-in-cluster.3F"><h3>in-cluster?</h3><div class="usage"><code>(in-cluster?)</code></div><div class="doc"><p>Returns true if running inside a WildFly/EAP container that's part of a cluster</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L35">view source</a></div></div><div class="public anchor" id="var-in-container.3F"><h3>in-container?</h3><div class="usage"><code>(in-container?)</code></div><div class="doc"><p>Returns true if running inside a WildFly/EAP container.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L30">view source</a></div></div><div class="public anchor" id="var-messaging-remoting-port"><h3>messaging-remoting-port</h3><div class="usage"><code>(messaging-remoting-port)</code></div><div class="doc"><p>Returns the port that HornetQ is listening on for remote connections.</p><p>Returns the correct port when in-container, and the default (5445), outside.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L81">view source</a></div></div><div class="public anchor" id="var-reset"><h3>reset</h3><div class="usage"><code>(reset)</code></div><div class="doc"><p>Resets the underlying WunderBoss layer. This stops and clears all services. Intended to be used from a repl or from tests.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L24">view source</a></div></div><div class="public anchor" id="var-reset-fixture"><h3>reset-fixture</h3><div class="usage"><code>(reset-fixture f)</code></div><div class="doc"><p>Invokes <code>f</code>, then calls <code><a href="immutant.util.html#var-reset">reset</a></code> if not <code><a href="immutant.util.html#var-in-container?">in-container?</a></code>.</p><p>Useful as a test fixture where you want to reset underlying state after a test run, but also run the same tests in-container (via fntest or other), where resetting state will disconnect the repl. In the in-container case, you rely on undeploy to reset the state.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L41">view source</a></div></div><div class="public anchor" id="var-set-bean-property"><h3>set-bean-property</h3><div class="usage"><code>(set-bean-property bean prop value)</code></div><div class="doc"><p>Calls a java bean-style setter (.setFooBar) for the given property (<code>:foo-bar</code>) and value.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/core/src/immutant/util.clj#L115">view source</a></div></div></div></body></html>