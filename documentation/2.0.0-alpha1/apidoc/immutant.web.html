<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><link href="css/docs.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>immutant.web documentation</title></head><body><div id="header"><h2><a href="http://immutant.org/">Immutant Home</a></h2><h1><a href="index.html">Immutant 2.0.0-alpha1</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>immutant</span></div></div></li><li class="depth-2"><a href="immutant.caching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>caching</span></div></a></li><li class="depth-3 branch"><a href="immutant.caching.core-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-cache</span></div></a></li><li class="depth-3"><a href="immutant.caching.core-memoize.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-memoize</span></div></a></li><li class="depth-2 branch"><a href="immutant.codecs.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>codecs</span></div></a></li><li class="depth-2 branch"><a href="immutant.coercions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coercions</span></div></a></li><li class="depth-2 branch"><a href="immutant.daemons.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>daemons</span></div></a></li><li class="depth-2"><a href="immutant.messaging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>messaging</span></div></a></li><li class="depth-3 branch"><a href="immutant.messaging.hornetq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hornetq</span></div></a></li><li class="depth-3"><a href="immutant.messaging.pipeline.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline</span></div></a></li><li class="depth-2"><a href="immutant.scheduling.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>scheduling</span></div></a></li><li class="depth-3"><a href="immutant.scheduling.joda.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>joda</span></div></a></li><li class="depth-2 branch"><a href="immutant.util.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 current"><a href="immutant.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.undertow.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>undertow</span></div></a></li><li class="depth-3"><a href="immutant.web.websocket.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websocket</span></div></a></li><li class="depth-2"><a href="immutant.wildfly.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>wildfly</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="immutant.web.html#var-run"><div class="inner"><span>run</span></div></a></li><li class="depth-1"><a href="immutant.web.html#var-run-dmc"><div class="inner"><span>run-dmc</span></div></a></li><li class="depth-1"><a href="immutant.web.html#var-stop"><div class="inner"><span>stop</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">immutant.web</h2><div class="doc"><p>Serve web requests using Ring handlers, Servlets, or Undertow HttpHandlers</p></div><div class="public anchor" id="var-run"><h3>run</h3><div class="usage"><code>(run handler &amp; options)</code></div><div class="doc"><p>Runs <code>handler</code> with the given <code>options</code>.</p><p><code>handler</code> can be a Ring handler function, a Servlet, or an Undertow HttpHandler. Can be called multiple times - if given the same options, any prior handler with those options will be replaced. Returns the given options with any missing defaults filled in.</p><p>options can be a map or kwargs, with these valid keys <em>[default]</em>:</p><ul><li><code>:host</code>          The interface bind address <em>[localhost]</em></li><li><code>:port</code>          The port listening for requests <em>[8080]</em></li><li><code>:path</code>          Maps the handler to a prefix of the url path <em>[/]</em></li><li><code>:virtual-host</code>  Virtual host name<em>[s] (a String or a List of Strings) [nil]</em></li></ul><p>Run calls may be threaded together, too:</p><pre>
  &#40;-&gt; &#40;run hello&#41;
    &#40;assoc <code>:path</code> &quot;/howdy&quot;&#41;
    &#40;-&gt;&gt; &#40;run howdy&#41;&#41;
    &#40;merge {<code>:path</code> &quot;/&quot; <code>:port</code> 8081}&#41;
    &#40;-&gt;&gt; &#40;run ola&#41;&#41;&#41;
</pre><p>The above actually creates two web server instances, one listening for hello and howdy requests on port 8080, and another listening for ola requests on 8081.</p><p>The underlying web server for Immutant is Undertow, which supports more advanced options than the above. These can be configured by passing an Undertow$Builder instance via the <code>:configuration</code> option, and that instance is easily constructed from a Clojure map using the <code><a href="immutant.web.undertow.html#var-options">options</a></code> function.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/web/src/immutant/web.clj#L24">view source</a></div></div><div class="public anchor" id="var-run-dmc"><h3>run-dmc</h3><h4 class="type">macro</h4><div class="usage"><code>(run-dmc handler &amp; options)</code></div><div class="doc"><p>Run in Development Mode (the 'C' is silent).</p><p>This macro invokes <code><a href="immutant.web.html#var-run">run</a></code> after ensuring the passed handler is var-quoted, with reload and stacktrace middleware applied, and then opens the app in a browser. Supports the same options as <code><a href="immutant.web.html#var-run">run</a></code>.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/web/src/immutant/web.clj#L93">view source</a></div></div><div class="public anchor" id="var-stop"><h3>stop</h3><div class="usage"><code>(stop &amp; options)</code></div><div class="doc"><p>Stops a running handler.</p><p><code>options</code> can be passed as a map or kwargs, but is typically the map returned from a <code><a href="immutant.web.html#var-run">run</a></code> call. If that return value is not available, you can pass the same options map passed to <code><a href="immutant.web.html#var-run">run</a></code> for the handler you want to stop. If options isn't provided, the handler at the root context path ("/") of the default server will be stopped. If there are no handlers remaining on the server, the server itself is stopped. Returns true if a handler was actually removed.</p></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.0.0-alpha1/web/src/immutant/web.clj#L70">view source</a></div></div></div></body></html>