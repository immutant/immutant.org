<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>immutant.cache documentation</title></head><body><div id="header"><h2><a href="../index.html">Immutant Manual</a></h2><h2><a href="http://immutant.org/">Immutant Home</a></h2><h1><a href="index.html">Immutant 0.8.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="immutant.cache.html"><span>immutant.cache</span></a></li><li><a href="immutant.codecs.html"><span>immutant.codecs</span></a></li><li><a href="immutant.daemons.html"><span>immutant.daemons</span></a></li><li><a href="immutant.dev.html"><span>immutant.dev</span></a></li><li><a href="immutant.jobs.html"><span>immutant.jobs</span></a></li><li><a href="immutant.messaging.html"><span>immutant.messaging</span></a></li><li><a href="immutant.pipeline.html"><span>immutant.pipeline</span></a></li><li><a href="immutant.registry.html"><span>immutant.registry</span></a></li><li><a href="immutant.repl.html"><span>immutant.repl</span></a></li><li><a href="immutant.util.html"><span>immutant.util</span></a></li><li><a href="immutant.web.html"><span>immutant.web</span></a></li><li><a href="immutant.web.session.html"><span>immutant.web.session</span></a></li><li><a href="immutant.xa.html"><span>immutant.xa</span></a></li><li><a href="immutant.xa.transaction.html"><span>immutant.xa.transaction</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="immutant.cache.html#var-Mutable"><span class="">Mutable</span></a></li><li><a href="immutant.cache.html#var-delete"><span class="protocol">delete</span></a></li><li><a href="immutant.cache.html#var-delete-all"><span class="protocol">delete-all</span></a></li><li><a href="immutant.cache.html#var-put"><span class="protocol">put</span></a></li><li><a href="immutant.cache.html#var-put-all"><span class="protocol">put-all</span></a></li><li><a href="immutant.cache.html#var-put-if-absent"><span class="protocol">put-if-absent</span></a></li><li><a href="immutant.cache.html#var-put-if-present"><span class="protocol">put-if-present</span></a></li><li><a href="immutant.cache.html#var-put-if-replace"><span class="protocol">put-if-replace</span></a></li><li><a href="immutant.cache.html#var-cache"><span class="">cache</span></a></li><li><a href="immutant.cache.html#var-memo"><span class="">memo</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>immutant.cache documentation</h2><pre class="doc">Infinispan-backed implementations of core.cache and core.memoize
protocols supporting multiple replication options and more.</pre><div class="public " id="var-Mutable"><h3>Mutable</h3><h4 class="type">protocol</h4><div class="usage"></div><pre class="doc">Functions for manipulating a shared, distributed cache.

Every 'put' function optionally accepts a map with the following
lifespan-oriented keys:

  :ttl - time-to-live, the max time the entry will live before expiry [-1]
  :idle - the time after which an entry will expire if not accessed [-1]
  :units - the units for the values of :ttl and :idle [:seconds]

Negative values imply no expiration.
Possible values for :units -- :days, :hours, :minutes, :seconds,
                              :milliseconds, :microseconds :nanoseconds

The conditional functions, e.g. put-if-*, are all atomic.</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/0.8.0//modules/cache/src/main/clojure/immutant/cache.clj#L27">Source</a></div></div><div class="public protocol" id="var-delete"><h3>delete</h3><div class="usage"><code>(delete cache key)</code><code>(delete cache key value)</code></div><pre class="doc">Delete the entry; value must match current if passed
</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/0.8.0/#L">Source</a></div></div><div class="public protocol" id="var-delete-all"><h3>delete-all</h3><div class="usage"><code>(delete-all cache)</code></div><pre class="doc">Clear all entries from the cache and return it
</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/0.8.0/#L">Source</a></div></div><div class="public protocol" id="var-put"><h3>put</h3><div class="usage"><code>(put cache key value)</code><code>(put cache key value options)</code></div><pre class="doc">Put an entry in the cache
</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/0.8.0/#L">Source</a></div></div><div class="public protocol" id="var-put-all"><h3>put-all</h3><div class="usage"><code>(put-all cache map)</code><code>(put-all cache map options)</code></div><pre class="doc">Put all the entries in cache
</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/0.8.0/#L">Source</a></div></div><div class="public protocol" id="var-put-if-absent"><h3>put-if-absent</h3><div class="usage"><code>(put-if-absent cache key value)</code><code>(put-if-absent cache key value options)</code></div><pre class="doc">Put it in only if key is not already there
</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/0.8.0/#L">Source</a></div></div><div class="public protocol" id="var-put-if-present"><h3>put-if-present</h3><div class="usage"><code>(put-if-present cache key value)</code><code>(put-if-present cache key value options)</code></div><pre class="doc">Put it in only if key is already there
</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/0.8.0/#L">Source</a></div></div><div class="public protocol" id="var-put-if-replace"><h3>put-if-replace</h3><div class="usage"><code>(put-if-replace cache key old new)</code><code>(put-if-replace cache key old new options)</code></div><pre class="doc">Put it in only if key is there and current matches old
</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/0.8.0/#L">Source</a></div></div><div class="public " id="var-cache"><h3>cache</h3><div class="usage"><code>(cache name &amp; {:keys [mode seed], :as options})</code></div><pre class="doc">Returns an object that implements both Mutable and
core.cache/CacheProtocol. A name is the only required argument. The
following options are supported:

The following options are supported [default]:
  :mode     Replication mode [:invalidated or :local]
              :local, :invalidated, :distributed, or :replicated
  :persist  If non-nil, data persists across server restarts in a file
              store; a string value names the directory [nil]
  :seed     A hash of initial entries [nil]
  :locking  Infinispan locking schemes [nil]
              :optimisitic or :pessimistic
  :ttl      The max time the entry will live before expiry [-1]
  :idle     The time after which an entry will expire if not accessed [-1]
  :units    The units for the values of :ttl and :idle [:seconds]

The replication mode defaults to :invalidated when clustered. When
not clustered, the value of :mode is ignored, and the cache will
be :local.

If :persist is true, cache entries will persist in the directory
named by immutant.cache.core/file-store-path. Override this by
setting :persist to a string naming the desired directory.

Seeding the cache will delete any existing entries.

The lifespan-oriented options (:ttl :idle :units) become the
default options for the functions of the Mutable protocol. But any
options passed to those functions take precedence over these.</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/0.8.0//modules/cache/src/main/clojure/immutant/cache.clj#L154">Source</a></div></div><div class="public " id="var-memo"><h3>memo</h3><div class="usage"><code>(memo f name &amp; options)</code></div><pre class="doc">Memoize a function by associating its arguments with return values
stored in a possibly-clustered Infinispan-backed cache. Other than
the function to be memoized, arguments are the same as for the
cache function.</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/0.8.0//modules/cache/src/main/clojure/immutant/cache.clj#L187">Source</a></div></div></div></body></html>